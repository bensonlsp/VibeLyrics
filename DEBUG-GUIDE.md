# 調試指南 - GitHub Pages 解析問題

## 🎯 目的

這個指南幫助你診斷為什麼在 GitHub Pages 上點擊「解析日文」按鈕後沒有顯示結果。

## 📋 問題描述

- ✅ 本地環境（localhost）運行正常
- ❌ GitHub Pages 上點擊「解析日文」後結果區域空白
- ✅ 頁面載入成功，Kuromoji 可能已載入
- ❓ 具體錯誤原因未知

## 🔍 診斷步驟

### 步驟 1：使用獨立測試頁面（推薦）

訪問專門的測試頁面，它會自動顯示詳細的調試信息：

```
https://bensonlsp.github.io/VibeLyrics/test-parse.html
```

**這個頁面會顯示：**
- ✅ Kuromoji 庫載入狀態
- ✅ Tokenizer 初始化狀態
- ✅ 實時控制台日誌（在頁面中顯示）
- ✅ 可視化的分詞結果
- ✅ 詳細的錯誤信息

**如何使用：**
1. 等待頁面載入（2-3 分鐘等 GitHub Pages 部署）
2. 觀察「狀態檢查」區域
3. 輸入測試文本或使用默認文本
4. 點擊「測試解析」
5. 查看「控制台日誌」區域的詳細輸出

### 步驟 2：在主頁面查看控制台日誌

如果你想在主應用頁面進行測試：

1. **打開 GitHub Pages 主頁面**
   ```
   https://bensonlsp.github.io/VibeLyrics/
   ```

2. **打開瀏覽器開發者工具**
   - Windows/Linux: 按 `F12` 或 `Ctrl+Shift+I`
   - Mac: 按 `Cmd+Option+I`
   - 或右鍵點擊頁面 → 選擇「檢查」

3. **切換到 Console（控制台）標籤**

4. **輸入日文並點擊「解析日文」按鈕**
   - 範例文本：`放送番組の同時配信・見逃し配信`

5. **查看控制台輸出**

你應該會看到類似以下的詳細日誌：

```
DOMContentLoaded 事件觸發
parseButton 元素找到，綁定點擊事件
lyricsInput 元素找到
Kuromoji 庫已載入，準備載入字典...
[1/3] 嘗試載入: 本地字典檔案 (Local)
✓ 本地字典檔案 (Local) 載入成功！耗時: 3.45 秒
========== 解析按鈕被點擊 ==========
Tokenizer 狀態: 已載入
輸入框內容: 放送番組の同時配信・見逃し配信
內容長度: 16
去除空白後長度: 16
開始執行 parseLyrics 函數...
========== 開始解析日文 ==========
輸入文本: 放送番組の同時配信・見逃し配信
文本長度: 16
Tokenizer 狀態: 已載入
開始分詞...
分詞完成，共 9 個 token
Token 範例: [...]
已清空解析結果區域
文本分為 1 行
處理第 1 行: "放送番組の同時配信・見逃し配信"
第 1 行有 9 個 token
DOM 更新完成
顯示解析結果容器
滾動到解析結果
========== 解析完成 ==========
```

## 🚨 常見錯誤和解決方案

### 錯誤 1: `Tokenizer 尚未載入`

**日誌顯示：**
```
Tokenizer 狀態: 未載入
```

**原因：**
- Kuromoji 字典檔案載入失敗或未完成

**解決方案：**
1. 等待更長時間（字典約 15MB）
2. 檢查網路連線
3. 重新整理頁面（Ctrl+Shift+R 強制重新載入）

### 錯誤 2: `找不到 parsedLyrics 元素`

**日誌顯示：**
```
找不到 parsedLyrics 元素
```

**原因：**
- HTML 結構問題
- 元素 ID 不匹配

**解決方案：**
- 清除瀏覽器快取
- 確認使用最新版本的代碼

### 錯誤 3: 分詞失敗

**日誌顯示：**
```
========== 解析失敗 ==========
錯誤類型: TypeError
錯誤訊息: ...
```

**原因：**
- Tokenizer 對象損壞
- 字典檔案不完整

**解決方案：**
1. 重新整理頁面
2. 清除瀏覽器快取
3. 使用測試頁面進行診斷

### 錯誤 4: DOM 更新失敗

**日誌顯示：**
```
DOM 更新完成
找不到 parsedLyricsContainer 元素
```

**原因：**
- HTML 元素被意外修改或刪除

**解決方案：**
- 重新整理頁面
- 檢查是否有瀏覽器擴充功能干擾

## 📸 如何回報問題

如果問題仍然存在，請提供以下信息：

1. **完整的控制台日誌**
   - 從頁面載入開始到點擊解析按鈕的所有日誌
   - 特別是紅色的錯誤訊息

2. **瀏覽器信息**
   - 瀏覽器名稱和版本
   - 操作系統

3. **網路環境**
   - 是否使用 VPN
   - 網路速度

4. **測試頁面結果**
   - test-parse.html 的運行結果
   - 是否成功載入和解析

5. **截圖**
   - 完整的頁面截圖
   - 控制台截圖

## 🛠️ 本地測試

如果你想在本地測試：

```bash
cd /path/to/VibeLyrics
python3 -m http.server 8080
```

然後訪問：
```
http://localhost:8080/
http://localhost:8080/test-parse.html
```

## 📊 預期行為

**成功解析時應該看到：**

1. **控制台日誌完整輸出**
   - 沒有紅色錯誤
   - 顯示「解析完成」

2. **頁面顯示解析結果**
   - 「已解析日文」區域出現
   - 日文文本帶有振假名標註
   - 可以點擊單詞查看詳情

3. **測試頁面顯示藍色卡片**
   - 每個單詞一個卡片
   - 顯示：表層形式、讀音、詞性

## ⏱️ 等待時間

GitHub Pages 部署通常需要 **2-5 分鐘**。如果剛推送代碼：

1. 等待 3-5 分鐘
2. 強制重新載入頁面（Ctrl+Shift+R）
3. 清除瀏覽器快取
4. 使用無痕模式測試

---

## 🔗 相關連結

- 主應用: https://bensonlsp.github.io/VibeLyrics/
- 測試頁面: https://bensonlsp.github.io/VibeLyrics/test-parse.html
- 診斷工具: https://bensonlsp.github.io/VibeLyrics/debug.html
- GitHub 倉庫: https://github.com/bensonlsp/VibeLyrics

---

**最後更新：** 2026-01-03

如果按照以上步驟仍無法解決問題，請將完整的控制台日誌截圖發送給我！
